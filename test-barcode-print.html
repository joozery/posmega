<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <style>
        @media print {
            .barcode-print-container {
                page-break-inside: avoid;
            }
            
            .barcode-row {
                page-break-inside: avoid;
                margin-bottom: 0 !important;
            }
            
            .barcode-item {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            .print\\:space-y-0 > * + * {
                margin-top: 0 !important;
            }
            
            .print\\:gap-0 {
                gap: 0 !important;
            }
            
            .print\\:p-0\\.5 {
                padding: 0.125rem !important;
            }
            
            .print\\:mt-0\\.5 {
                margin-top: 0.125rem !important;
            }
        }
        
        .barcode-label-print {
            @apply border border-gray-300 rounded-lg;
            min-height: 70px;
        }
        
        @media print {
            .barcode-label-print {
                min-height: 65px;
                border-width: 0.5px;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 class="text-2xl font-bold text-gray-900 mb-4">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</h1>
            <p class="text-gray-600 mb-4">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ß‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</p>
            
            <div class="flex gap-4 mb-4">
                <button onclick="window.print()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                    üñ®Ô∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
                </button>
                <button onclick="generateSampleLabels()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                    üîÑ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</label>
                    <select id="columns" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                        <option value="2">2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</option>
                        <option value="3">3 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</option>
                        <option value="4" selected>4 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</option>
                        <option value="5">5 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</option>
                        <option value="6">6 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß</label>
                    <select id="rows" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                        <option value="3">3 ‡πÅ‡∏ñ‡∏ß</option>
                        <option value="5" selected>5 ‡πÅ‡∏ñ‡∏ß</option>
                        <option value="8">8 ‡πÅ‡∏ñ‡∏ß</option>
                        <option value="10">10 ‡πÅ‡∏ñ‡∏ß</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div id="barcodeContainer" class="bg-white rounded-lg shadow-lg p-4">
            <!-- ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        const sampleProducts = [
            { id: 1, name: "Adidas Ultraboost", price: 4500, barcode: "test001" },
            { id: 2, name: "Nike Air Max", price: 3800, barcode: "test002" },
            { id: 3, name: "Puma RS-X", price: 3200, barcode: "test003" },
            { id: 4, name: "New Balance 574", price: 2800, barcode: "test004" },
            { id: 5, name: "Converse Chuck", price: 2200, barcode: "test005" },
            { id: 6, name: "Vans Old Skool", price: 1900, barcode: "test006" },
            { id: 7, name: "Reebok Classic", price: 1600, barcode: "test007" },
            { id: 8, name: "Asics Gel-Kayano", price: 4200, barcode: "test008" },
            { id: 9, name: "Brooks Ghost", price: 3900, barcode: "test009" },
            { id: 10, name: "Saucony Ride", price: 3600, barcode: "test010" },
            { id: 11, name: "Hoka Clifton", price: 4800, barcode: "test011" },
            { id: 12, name: "Mizuno Wave", price: 3400, barcode: "test012" },
            { id: 13, name: "Under Armour", price: 3100, barcode: "test013" },
            { id: 14, name: "Adidas Stan Smith", price: 2600, barcode: "test014" },
            { id: 15, name: "Nike Cortez", price: 2400, barcode: "test015" },
            { id: 16, name: "Puma Suede", price: 1800, barcode: "test016" },
            { id: 17, name: "New Balance 990", price: 5200, barcode: "test017" },
            { id: 18, name: "Converse One Star", price: 2000, barcode: "test018" },
            { id: 19, name: "Vans Authentic", price: 1700, barcode: "test019" },
            { id: 20, name: "Reebok Club C", price: 1400, barcode: "test020" }
        ];

        function generateSampleLabels() {
            const columns = parseInt(document.getElementById('columns').value);
            const rows = parseInt(document.getElementById('rows').value);
            const totalLabels = columns * rows;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
            const labels = [];
            for (let i = 0; i < totalLabels; i++) {
                const productIndex = i % sampleProducts.length;
                labels.push(sampleProducts[productIndex]);
            }
            
            renderBarcodeSheet(labels, columns);
        }

        function renderBarcodeSheet(labels, columns) {
            const container = document.getElementById('barcodeContainer');
            
            // ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ñ‡∏ß
            const rows = [];
            for (let i = 0; i < labels.length; i += columns) {
                rows.push(labels.slice(i, i + columns));
            }
            
            let html = '<div class="barcode-print-container">';
            html += '<div class="space-y-1 print:space-y-0">';
            
            rows.forEach((row, rowIndex) => {
                html += '<div class="flex justify-around gap-1 print:gap-0 bg-white break-inside-avoid text-black print:break-inside-avoid barcode-row">';
                
                row.forEach((product, colIndex) => {
                    html += `
                        <div class="flex-1 text-center flex flex-col justify-between border border-gray-300 rounded-lg p-1 print:p-0.5 min-w-0 barcode-label-print">
                            <div class="min-w-0">
                                <div class="flex justify-between items-baseline gap-1">
                                    <span class="text-xs truncate flex-1 text-left font-bold">${product.name}</span>
                                    <span class="text-lg flex-shrink-0 font-black">${product.price.toLocaleString()}</span>
                                </div>
                            </div>
                            <div class="w-full h-[35px] mt-1 print:mt-0.5">
                                <svg class="w-full h-full" id="barcode-${rowIndex}-${colIndex}"></svg>
                            </div>
                            <p class="text-xs font-mono mt-1 print:mt-0.5 truncate">${product.barcode}</p>
                        </div>
                    `;
                });
                
                html += '</div>';
            });
            
            html += '</div></div>';
            container.innerHTML = html;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
            setTimeout(() => {
                rows.forEach((row, rowIndex) => {
                    row.forEach((product, colIndex) => {
                        try {
                            JsBarcode(`#barcode-${rowIndex}-${colIndex}`, product.barcode, {
                                format: "CODE128",
                                width: 1.2,
                                height: 35,
                                displayValue: false,
                                background: 'transparent',
                                lineColor: "#000000",
                            });
                        } catch (e) {
                            console.error("Barcode generation error:", e);
                        }
                    });
                });
            }, 100);
        }

        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        document.addEventListener('DOMContentLoaded', () => {
            generateSampleLabels();
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
            document.getElementById('columns').addEventListener('change', generateSampleLabels);
            document.getElementById('rows').addEventListener('change', generateSampleLabels);
        });
    </script>
</body>
</html> 